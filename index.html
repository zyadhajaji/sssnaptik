<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>TikTok Downloader</title>
  <style>
    body {
      margin: 0;
      font-family: 'Montserrat', sans-serif;
      background-color: #0e0e0e;
      color: #fff;
      line-height: 1.6;
    }

    /* HEADER */
    header {
      text-align: center;
      padding: 50px 20px;
      background: linear-gradient(to bottom, #1a1a1a, #0e0e0e);
    }

    header h1 {
      font-size: 2.5rem;
      color: #fff;
      text-shadow: 0px 0px 6px #FFD700;
      font-weight: 700;
    }

    /* DOWNLOAD BOX */
    .download-box {
      background: linear-gradient(145deg, #1a1a1a, #0b0b0b);
      border: 2px solid #FFD700;
      padding: 30px 20px;
      border-radius: 20px;
      max-width: 600px;
      margin: 30px auto;
      text-align: center;
      box-shadow: 0px 0px 20px rgba(255, 215, 0, 0.3);
    }

    .download-box input {
      width: 80%;
      padding: 12px;
      border-radius: 8px;
      border: none;
      outline: none;
      margin-bottom: 15px;
      font-size: 16px;
      text-align: center;
    }

    /* OPTIONS */
    .options {
      margin-top: 20px;
      display: none;
    }

    .options button {
      display: block;
      margin: 8px auto;
      padding: 8px 15px;
      font-size: 14px;
      background: linear-gradient(45deg, #FFD700, #FFA500);
      color: #000;
      border: none;
      border-radius: 6px;
      cursor: pointer;
      width: 65%;
      transition: all 0.3s;
      font-weight: 600;
      box-shadow: 0 0 8px rgba(255, 215, 0, 0.5);
    }

    .options button:hover {
      background: linear-gradient(45deg, #FFA500, #FFD700);
      transform: scale(1.05);
      box-shadow: 0 0 12px rgba(255, 215, 0, 0.8);
    }

    /* DOWNLOAD READY BUTTON */
    #downloadOptions {
      margin-top: 30px;
      text-align: center;
    }

    .download-ready-title {
      font-size: 1.3rem;
      color: #FFD700;
      margin-bottom: 15px;
      font-weight: 600;
      text-shadow: 0 0 5px #FFA500;
    }

    .download-option {
      display: inline-block;
      padding: 14px 30px;
      margin-top: 20px;
      font-size: 1.2rem;
      font-weight: bold;
      border-radius: 10px;
      background: linear-gradient(145deg, #FFD700, #FFA500);
      color: #000;
      text-decoration: none;
      box-shadow: 0 4px 20px rgba(255, 215, 0, 0.6);
      transition: all 0.3s ease;
    }

    .download-option:hover {
      background: linear-gradient(145deg, #FFA500, #FFD700);
      transform: scale(1.08);
      box-shadow: 0 6px 25px rgba(255, 215, 0, 0.9);
    }

    @media (max-width: 480px) {
      .download-box input {
        width: 90%;
      }
      .options button {
        width: 80%;
        font-size: 13px;
      }
      .download-option {
        width: 80%;
        font-size: 1rem;
        padding: 12px;
      }
    }
  </style>
</head>
<body>
  <header>
    <h1>The TikTok Downloader</h1>
  </header>

  <div class="download-box">
    <input type="text" id="tiktokUrl" placeholder="Paste TikTok URL here..." />
    <div class="options" id="downloadOptions">
      <button onclick="downloadOption('watermark')">Download with Watermark</button>
      <button onclick="downloadOption('hd')">Download 4K HD (No Watermark)</button>
      <button onclick="downloadOption('mp3')">Download MP3 (Audio Only)</button>
    </div>
  </div>

  <script>
    function downloadOption(option) {
      const url = document.getElementById("tiktokUrl").value.trim();
      const optionsBox = document.getElementById("downloadOptions");

      if (!url || !url.includes('tiktok.com')) {
        optionsBox.innerHTML = `<p style="color:red;">Please paste a valid TikTok URL</p>`;
        return;
      }

      optionsBox.innerHTML = `<p style="color:gold;">Fetching your download link...</p>`;

      fetch('/.netlify/functions/download', {
        method: 'POST',
        body: JSON.stringify({ url, option })
      })
        .then(res => res.json())
        .then(data => {
          if (data.success) {
            optionsBox.innerHTML = `
              <div class="download-ready-title">Your Download is Ready!</div>
            `;

            const downloadLink = document.createElement('a');
            downloadLink.href = data.link;
            downloadLink.download = data.filename;
            downloadLink.textContent = 'Download Video Now';
            downloadLink.className = 'download-option';

            optionsBox.appendChild(downloadLink);
          } else {
            optionsBox.innerHTML = `<p style="color:red;">${data.error}</p>`;
          }
        })
        .catch(() => {
          optionsBox.innerHTML = `<p style="color:red;">Failed to get the video. Try again.</p>`;
        });
    }
  </script>
</body>
</header>

<script src="script.js"></script>
 
  <!-- HOW TO SECTION -->
  <section class="info-section">
    <h2>How to download TikTok without watermark?</h2>
    <p>
      Our TikTok Downloader makes it easy to save videos in the best quality.
      Simply paste the link, choose the format (HD, MP3, or with watermark), and download instantly!
    </p>
    <div class="steps">
      <div class="step">
        <h3>1</h3>
        <p>Copy your TikTok video link.</p>
      </div>
      <div class="step">
        <h3>2</h3>
        <p>Paste it in the box above.</p>
      </div>
      <div class="step">
        <h3>3</h3>
        <p>Choose the format and hit download.</p>
      </div>
    </div>
  </section>

  <div class="ad-section">
    <h2>Enjoy our service?</h2>
    <p>Support us by checking out these sponsored offers:</p>
    <div class="ad-unit-container">
      <ins class="adsbygoogle"
           style="display:block"
           data-ad-client="YOUR_ADSENSE_ID"
           data-ad-slot="YOUR_AD_SLOT"
           data-ad-format="auto"
           data-full-width-responsive="true"></ins>
      <script>
        (adsbygoogle = window.adsbygoogle || []).push({});
      </script>
    </div>
    <script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-1026231247283281"
     crossorigin="anonymous"></script>
  </div>
  <section>
    <h2>This is how you can use our TikTok downloader:</h2>
    <p>It's simple: paste the link, choose the format, and enjoy your video with no watermark.</p>
  </section>
  <section>
    <h2>This TikTok Downloader is a free tool that helps download at the highest quality:</h2>
    <p>We offer free, unlimited downloads with the highest video and audio quality available.</p>
  </section>
  <!-- AD SECTION -->
  <div id="adContainer" class="ad-container" style="display: none;">
    <div class="ad-message">
      <h3>Please watch this ad to continue</h3>
      <p>Your 4K download will start after the ad</p>
    </div>
    <div class="ad-unit-container">
      <ins class="adsbygoogle"
           style="display:block"
           data-ad-client="YOUR_ADSENSE_ID"
           data-ad-slot="YOUR_AD_SLOT"
           data-ad-format="auto"
           data-full-width-responsive="true"></ins>
      <script>
        (adsbygoogle = window.adsbygoogle || []).push({});
      </script>
    </div>
    <button class="gold-btn" id="skipAdBtn" style="display: none;" onclick="skipAd()">Skip Ad</button>
  </div>

<section class="faq">

<section class="faq">
    <h2>Frequently Asked Questions</h2>
    <div class="faq-container">

      <div class="faq-item">
        <h3 onclick="toggleFAQ(this)">Is this tool free?</h3>
        <p>Yes! Our TikTok downloader is 100% free with no hidden charges. We built this platform to give users fast and easy access to their favorite TikTok videos without paying for premium subscriptions.</p>
      </div>

      <div class="faq-item">
        <h3 onclick="toggleFAQ(this)">Do I need to install anything?</h3>
        <p>No installations or plugins are required. Everything is web-based and works directly in your browser.</p>
      </div>

      <div class="faq-item">
        <h3 onclick="toggleFAQ(this)">Does this work on all devices?</h3>
        <p>Yes! Our tool works seamlessly on iOS, Android, Windows, and macOS. You can use it on your phone, tablet, or PC.</p>
      </div>

      <div class="faq-item">
        <h3 onclick="toggleFAQ(this)">Can I download videos without watermark?</h3>
        <p>Absolutely. Choose the "4K HD (No Watermark)" option to download a clean, high-quality version of the TikTok video.</p>
      </div>

      <div class="faq-item">
        <h3 onclick="toggleFAQ(this)">Can I extract audio from TikTok videos?</h3>
        <p>Yes. Select the MP3 option, and we will automatically extract the audio in high-quality format.</p>
      </div>

      <div class="faq-item hidden-faq">
        <h3 onclick="toggleFAQ(this)">Is there a limit on downloads?</h3>
        <p>No! You can download as many videos or audios as you like. We do not have any daily or weekly limits.</p>
      </div>

      <div class="faq-item hidden-faq">
        <h3 onclick="toggleFAQ(this)">Is my privacy protected?</h3>
        <p>Yes, we value your privacy. We do not store any links, videos, or user data. All downloads are processed on the fly.</p>
      </div>

      <div class="faq-item hidden-faq">
        <h3 onclick="toggleFAQ(this)">Do you support private TikToks?</h3>
        <p>We only support public TikToks. Private videos are restricted by TikTokâ€™s privacy policy.</p>
      </div>
    </div>

  </section>
<script src="script.js"></script>
<script>
  // Trigger download after ad or other event
  function showDownloadLink(option = 'hd') {
    const url = document.getElementById('tiktokUrl').value.trim();
    const optionsBox = document.getElementById('downloadOptions');

    // Clear previous messages
    optionsBox.innerHTML = '';

    if (!url || !url.includes('tiktok.com')) {
      optionsBox.innerHTML = `<p style="color:red;">Please paste a valid TikTok URL.</p>`;
      return;
    }

    // Optional loading message
    optionsBox.innerHTML = `<p style="color:yellow;">Fetching your download link...</p>`;

    fetch(`/.netlify/functions/download`, {
      method: 'POST',
      headers: { 'Content-Type': 'application/json' },
      body: JSON.stringify({ url, option })
    })
      .then(res => res.json())
      .then(data => {
        if (data.success) {
          // Create clickable link
          const downloadLink = document.createElement('a');
          downloadLink.href = data.link;
          downloadLink.download = data.filename;
          downloadLink.textContent = 'Download Now';
          downloadLink.className = 'download-option';
          downloadLink.style.display = 'block';
          downloadLink.style.marginTop = '15px';

          // Replace loading message with link
          optionsBox.innerHTML = '';
          optionsBox.appendChild(downloadLink);

          // Trigger download automatically
          downloadLink.click();
        } else {
          optionsBox.innerHTML = `<p style="color:red;">${data.error}</p>`;
        }
      })
      .catch(err => {
        console.error(err);
        optionsBox.innerHTML = `<p style="color:red;">Something went wrong.</p>`;
      });
  }

  // Example: Auto trigger download after 30s ad (or custom event)
  // Call this function directly after your ad logic:
  // setTimeout(() => showDownloadLink('hd'), 30000);
</script>

</body>

</html>
